# UseCoroutineInCpp

---

코루틴을 어떻게 사용할지에 대해 생각 해보기 위한 프로젝트

여러 방면에서 검토해볼 수 있도록 하자

---

1. 락프리 자료구조에서의 사용?

코루틴 객체를 잡이라고 생각하고 락프리 자료구조에 집어 넣는 식으로 구현해본다면?

-> 락프리 자료구조에다가 코루틴 객체를 던져보고, insert를 실행시켜봄.

-> 성공하면 그대로 코루틴을 빠져나와 다시 메인 루틴으로 돌아옴

-> 실패하면 현재 경합중이므로, 일단 메인 루틴에 yield로 제어를 넘기고 다른 일을 처리하다가 다시 돌아옴

--> yield를 한 이유는, 현재 경합중이므로, 다른 일을 처리하고 다시 코루틴으로 돌아올 때, 경합의 밀도가 낮아질 것을 기대함

---

아래 이유로 문제가 있을 듯 함

-> 경합이 거의 없다면, 코루틴 객체를 생성하는 부담만 추가적으로 얻는 꼴임

-> 경합이 심한 상태라면, 자료구조에 insert 하지도 못하고, 코루틴만 왔다 갔다 하는 꼴임

=> 이렇게 사용하는 것은 아닌거 같음...

---
